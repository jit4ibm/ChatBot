import { C as Callback, E as Emitter } from '../../../emitter-DdThRYHg.cjs';
import { B as BaseAgent, a as BaseAgentRunOptions } from '../../../base-BtTTvr-m.cjs';
import { GetRunContext } from '../../../context.cjs';
import { BaseMessage } from '../../../llms/primitives/message.cjs';
import { RePlanState } from './prompts.cjs';
import { BaseMemory } from '../../../memory/base.cjs';
import { UnconstrainedMemory } from '../../../memory/unconstrainedMemory.cjs';
import { AnyTool } from '../../../tools/base.cjs';
import { AnyChatLLM } from '../../../llms/chat.cjs';
import '../../../internals/types.cjs';
import '../../../internals/helpers/guards.cjs';
import '../../../internals/serializable.cjs';
import '../../../errors.cjs';
import '../../../internals/helpers/promise.cjs';
import 'ajv';
import 'zod';
import '../../../template.cjs';
import 'promise-based-task';
import '../../../cache/base.cjs';
import '../../../internals/helpers/schema.cjs';
import 'zod-to-json-schema';
import '../../../llms/base.cjs';

/**
 * Copyright 2024 IBM Corp.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

interface RePlanRunInput {
    prompt: string | null;
}
interface RePlanRunOutput {
    message: BaseMessage;
    intermediateMemory: BaseMemory;
}
interface RePlanToolCall {
    name: string;
    input: any;
}
interface RePlanEvents {
    update: Callback<{
        state: RePlanState;
    }>;
    tool: Callback<{
        type: "start";
        tool: AnyTool;
        input: any;
        calls: RePlanToolCall[];
    } | {
        type: "success";
        tool: AnyTool;
        input: any;
        output: any;
        calls: RePlanToolCall[];
    } | {
        type: "error";
        tool: AnyTool;
        input: any;
        error: Error;
        calls: RePlanToolCall[];
    }>;
}
interface Input {
    memory: BaseMemory;
    tools: AnyTool[];
    llm: AnyChatLLM;
}
declare class RePlanAgent extends BaseAgent<RePlanRunInput, RePlanRunOutput> {
    protected readonly input: Input;
    emitter: Emitter<RePlanEvents>;
    constructor(input: Input);
    protected _run(input: RePlanRunInput, _options: BaseAgentRunOptions, context: GetRunContext<this>): Promise<RePlanRunOutput>;
    protected createRunner(context: GetRunContext<this>): Promise<{
        memory: UnconstrainedMemory;
        run: () => Promise<RePlanState>;
        tools: (calls: RePlanToolCall[]) => Promise<any[]>;
    }>;
    get memory(): BaseMemory<unknown>;
}

export { RePlanAgent, type RePlanEvents, type RePlanRunInput, type RePlanRunOutput, type RePlanToolCall };
