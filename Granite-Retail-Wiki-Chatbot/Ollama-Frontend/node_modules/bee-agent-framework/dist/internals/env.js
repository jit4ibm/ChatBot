import { z } from 'zod';
import { FrameworkError } from '../errors.js';
import { getProp } from './helpers/object.js';

var __defProp = Object.defineProperty;
var __name = (target, value) => __defProp(target, "name", { value, configurable: true });
function getEnv(key) {
  return getProp(process.env, [
    key
  ], void 0);
}
__name(getEnv, "getEnv");
function parseEnv(key, schema, defaultValue) {
  const value = getEnv(key) ?? defaultValue;
  const result = schema.safeParse(value);
  if (!result.success) {
    if (value === void 0) {
      throw new FrameworkError(`Required variable '${key}' is not set!`);
    }
    throw new FrameworkError(`Failed to parse ENV variable (${key})!`, [
      result.error
    ]);
  }
  return result.data;
}
__name(parseEnv, "parseEnv");
parseEnv.asBoolean = (key, fallback = false) => {
  return parseEnv(key, z.string(), String(fallback)).trim().toLowerCase() === "true";
};
function hasEnv(key) {
  return getProp(process.env, [
    key
  ]) !== void 0;
}
__name(hasEnv, "hasEnv");

export { getEnv, hasEnv, parseEnv };
//# sourceMappingURL=env.js.map
//# sourceMappingURL=env.js.map