{"version":3,"sources":["../../../src/internals/helpers/weakRef.ts"],"names":["isWeakKey","value","SafeWeakSet","WeakSet","has","add","delete","SafeWeakMap","WeakMap","get","key","set"],"mappings":";;AAgBO,SAASA,UAAUC,KAAc,EAAA;AACtC,EAAOA,OAAAA,KAAAA,IAAS,IAAQ,IAAA,OAAOA,KAAU,KAAA,QAAA;AAC3C;AAFgBD,MAAAA,CAAAA,SAAAA,EAAAA,WAAAA,CAAAA;AAIT,MAAME,oBAAoBC,OAAAA,CAAAA;EApBjC;;;AAqBEC,EAAAA,GAAAA,CAAIH,KAAgB,EAAA;AAClB,IAAID,IAAAA,SAAAA,CAAUC,KAAAA,CAAQ,EAAA;AACpB,MAAO,OAAA,KAAA,CAAMG,IAAIH,KAAAA,CAAAA;AACnB;AACA,IAAO,OAAA,KAAA;AACT;AAEAI,EAAAA,GAAAA,CAAIJ,KAAgB,EAAA;AAClB,IAAID,IAAAA,SAAAA,CAAUC,KAAAA,CAAQ,EAAA;AACpB,MAAA,KAAA,CAAMI,IAAIJ,KAAAA,CAAAA;AACZ;AACA,IAAO,OAAA,IAAA;AACT;AAEAK,EAAAA,MAAAA,CAAOL,KAAgB,EAAA;AACrB,IAAID,IAAAA,SAAAA,CAAUC,KAAAA,CAAQ,EAAA;AACpB,MAAO,OAAA,KAAA,CAAMK,OAAOL,KAAAA,CAAAA;AACtB;AACA,IAAO,OAAA,KAAA;AACT;AACF;AAEO,MAAMM,oBAAuBC,OAAAA,CAAAA;EA3CpC;;;AA4CEJ,EAAAA,GAAAA,CAAIH,KAAgB,EAAA;AAClB,IAAID,IAAAA,SAAAA,CAAUC,KAAAA,CAAQ,EAAA;AACpB,MAAO,OAAA,KAAA,CAAMG,IAAIH,KAAAA,CAAAA;AACnB;AACA,IAAO,OAAA,KAAA;AACT;AAEAQ,EAAAA,GAAAA,CAAIC,GAAc,EAAA;AAChB,IAAIV,IAAAA,SAAAA,CAAUU,GAAAA,CAAM,EAAA;AAClB,MAAO,OAAA,KAAA,CAAMD,IAAIC,GAAAA,CAAAA;AACnB;AACF;AAEAC,EAAAA,GAAAA,CAAID,KAAcT,KAAU,EAAA;AAC1B,IAAID,IAAAA,SAAAA,CAAUU,GAAAA,CAAM,EAAA;AAClB,MAAMC,KAAAA,CAAAA,GAAAA,CAAID,KAAKT,KAAAA,CAAAA;AACjB;AACA,IAAO,OAAA,IAAA;AACT;AAEAK,EAAAA,MAAAA,CAAOL,KAAgB,EAAA;AACrB,IAAID,IAAAA,SAAAA,CAAUC,KAAAA,CAAQ,EAAA;AACpB,MAAO,OAAA,KAAA,CAAMK,OAAOL,KAAAA,CAAAA;AACtB;AACA,IAAO,OAAA,KAAA;AACT;AACF","file":"weakRef.js","sourcesContent":["/**\n * Copyright 2024 IBM Corp.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function isWeakKey(value: unknown): value is WeakKey {\n  return value != null && typeof value === \"object\";\n}\n\nexport class SafeWeakSet extends WeakSet {\n  has(value: unknown) {\n    if (isWeakKey(value)) {\n      return super.has(value);\n    }\n    return false;\n  }\n\n  add(value: unknown) {\n    if (isWeakKey(value)) {\n      super.add(value);\n    }\n    return this;\n  }\n\n  delete(value: unknown) {\n    if (isWeakKey(value)) {\n      return super.delete(value);\n    }\n    return false;\n  }\n}\n\nexport class SafeWeakMap<T> extends WeakMap<WeakKey, T> {\n  has(value: unknown) {\n    if (isWeakKey(value)) {\n      return super.has(value);\n    }\n    return false;\n  }\n\n  get(key: unknown) {\n    if (isWeakKey(key)) {\n      return super.get(key);\n    }\n  }\n\n  set(key: unknown, value: T) {\n    if (isWeakKey(key)) {\n      super.set(key, value);\n    }\n    return this;\n  }\n\n  delete(value: unknown) {\n    if (isWeakKey(value)) {\n      return super.delete(value);\n    }\n    return false;\n  }\n}\n"]}