import { BaseCache } from '../../cache/base.js';
import * as promise_based_task from 'promise-based-task';
import { BaseToolOptions, Tool, ToolEmitter, ToolInput, BaseToolRunOptions } from '../base.js';
import { PromiseClient } from '@connectrpc/connect';
import { CodeInterpreterService } from 'bee-proto/code_interpreter/v1/code_interpreter_service_connect';
import { z } from 'zod';
import { BaseLLMOutput } from '../../llms/base.js';
import { LLM } from '../../llms/llm.js';
import { PromptTemplate } from '../../template.js';
import { PythonStorage, PythonFile } from './storage.js';
import { PythonToolOutput } from './output.js';
import { ConnectionOptions } from 'node:tls';
import { RunContext } from '../../context.js';
import { E as Emitter } from '../../emitter-DRfJC1TP.js';
import '../../internals/serializable.js';
import '../../internals/types.js';
import '../../internals/helpers/guards.js';
import 'ajv';
import '../../errors.js';
import '../../internals/helpers/schema.js';
import 'zod-to-json-schema';
import '../../internals/helpers/promise.js';
import 'fs';

interface CodeInterpreterOptions {
    url: string;
    connectionOptions?: ConnectionOptions;
}
interface PythonToolOptions extends BaseToolOptions {
    codeInterpreter: CodeInterpreterOptions;
    executorId?: string;
    preprocess?: {
        llm: LLM<BaseLLMOutput>;
        promptTemplate: PromptTemplate.infer<{
            input: string;
        }>;
    };
    storage: PythonStorage;
}
declare class PythonTool extends Tool<PythonToolOutput, PythonToolOptions> {
    name: string;
    description: string;
    readonly storage: PythonStorage;
    protected files: PythonFile[];
    readonly emitter: ToolEmitter<ToolInput<this>, PythonToolOutput>;
    inputSchema(): Promise<z.ZodObject<{
        inputFiles?: z.ZodArray<z.ZodEnum<[any, ...string[]]>, "many"> | undefined;
        language: z.ZodEnum<["python", "shell"]>;
        code: z.ZodString;
    }, "strip", z.ZodTypeAny, {
        code: string;
        language: "python" | "shell";
        inputFiles?: unknown;
    }, {
        code: string;
        language: "python" | "shell";
        inputFiles?: unknown;
    }>>;
    protected readonly client: PromiseClient<typeof CodeInterpreterService>;
    protected readonly preprocess: {
        llm: LLM<BaseLLMOutput>;
        promptTemplate: PromptTemplate.infer<{
            input: string;
        }>;
    } | undefined;
    constructor(options: PythonToolOptions);
    protected _createClient(): PromiseClient<typeof CodeInterpreterService>;
    protected _run(input: ToolInput<this>, _options: Partial<BaseToolRunOptions>, run: RunContext<this>): Promise<PythonToolOutput>;
    createSnapshot(): {
        storage: PythonStorage;
        preprocess: {
            llm: LLM<BaseLLMOutput>;
            promptTemplate: PromptTemplate.infer<{
                input: string;
            }>;
        } | undefined;
        name: string;
        description: string;
        options: PythonToolOptions;
        cache: BaseCache<promise_based_task.Task<PythonToolOutput, any>>;
        emitter: Emitter<any>;
    };
    loadSnapshot(snapshot: ReturnType<typeof this.createSnapshot>): void;
}

export { type CodeInterpreterOptions, PythonTool, type PythonToolOptions };
