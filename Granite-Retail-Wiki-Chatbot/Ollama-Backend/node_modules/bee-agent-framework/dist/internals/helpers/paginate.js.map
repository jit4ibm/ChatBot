{"version":3,"sources":["../../../src/internals/helpers/paginate.ts"],"names":["paginate","input","acc","length","size","data","done","handler","offset","limit","push"],"mappings":";;AAqBA,eAAsBA,SAAYC,KAAuB,EAAA;AACvD,EAAA,MAAMC,MAAW,EAAA;AAEjB,EAAOA,OAAAA,GAAAA,CAAIC,MAASF,GAAAA,KAAAA,CAAMG,IAAM,EAAA;AAC9B,IAAA,MAAM,EAAEC,IAAMC,EAAAA,IAAAA,EAAS,GAAA,MAAML,MAAMM,OAAQ,CAAA;AACzCC,MAAAA,MAAAA,EAAQN,GAAIC,CAAAA,MAAAA;MACZM,KAAOR,EAAAA,KAAAA,CAAMG,OAAOF,GAAIC,CAAAA;KAC1B,CAAA;AACAD,IAAIQ,GAAAA,CAAAA,IAAAA,CAAI,GAAIL,IAAAA,CAAAA;AAEZ,IAAIC,IAAAA,IAAAA,IAAQD,IAAKF,CAAAA,MAAAA,KAAW,CAAG,EAAA;AAC7B,MAAA;AACF;AACF;AAEA,EAAID,IAAAA,GAAAA,CAAIC,MAASF,GAAAA,KAAAA,CAAMG,IAAM,EAAA;AAC3BF,IAAAA,GAAAA,CAAIC,SAASF,KAAMG,CAAAA,IAAAA;AACrB;AAEA,EAAOF,OAAAA,GAAAA;AACT;AApBsBF,MAAAA,CAAAA,QAAAA,EAAAA,UAAAA,CAAAA","file":"paginate.js","sourcesContent":["/**\n * Copyright 2024 IBM Corp.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport interface PaginateInput<T> {\n  size: number;\n  handler: (data: { offset: number; limit: number }) => Promise<{ data: T[]; done: boolean }>;\n}\n\nexport async function paginate<T>(input: PaginateInput<T>): Promise<T[]> {\n  const acc: T[] = [];\n\n  while (acc.length < input.size) {\n    const { data, done } = await input.handler({\n      offset: acc.length,\n      limit: input.size - acc.length,\n    });\n    acc.push(...data);\n\n    if (done || data.length === 0) {\n      break;\n    }\n  }\n\n  if (acc.length > input.size) {\n    acc.length = input.size;\n  }\n\n  return acc;\n}\n"]}