{"version":3,"sources":["../../src/internals/env.ts"],"names":["getEnv","key","getProp","process","env","undefined","parseEnv","schema","defaultValue","value","result","safeParse","success","FrameworkError","error","data","asBoolean","fallback","z","string","String","trim","toLowerCase","hasEnv"],"mappings":";;;;;;;;AAoBO,SAASA,OAAOC,GAAW,EAAA;AAChC,EAAOC,OAAAA,kBAAAA,CAAQC,QAAQC,GAAK,EAAA;AAACH,IAAAA;KAAMI,KAAAA,CAAAA,CAAAA;AACrC;AAFgBL,MAAAA,CAAAA,MAAAA,EAAAA,QAAAA,CAAAA;AAIT,SAASM,QAAAA,CAAYL,GAAaM,EAAAA,MAAAA,EAAsBC,YAAgB,EAAA;AAC7E,EAAMC,MAAAA,KAAAA,GAAQT,MAAOC,CAAAA,GAAAA,CAAQO,IAAAA,YAAAA;AAC7B,EAAME,MAAAA,MAAAA,GAASH,MAAOI,CAAAA,SAAAA,CAAUF,KAAAA,CAAAA;AAChC,EAAI,IAAA,CAACC,OAAOE,OAAS,EAAA;AACnB,IAAA,IAAIH,UAAUJ,KAAW,CAAA,EAAA;AACvB,MAAA,MAAM,IAAIQ,yBAAAA,CAAe,CAAsBZ,mBAAAA,EAAAA,GAAAA,CAAkB,aAAA,CAAA,CAAA;AACnE;AAEA,IAAA,MAAM,IAAIY,yBAAAA,CAAe,CAAiCZ,8BAAAA,EAAAA,GAAAA,CAAS,EAAA,CAAA,EAAA;MAACS,MAAOI,CAAAA;AAAM,KAAA,CAAA;AACnF;AACA,EAAA,OAAOJ,MAAOK,CAAAA,IAAAA;AAChB;AAXgBT,MAAAA,CAAAA,QAAAA,EAAAA,UAAAA,CAAAA;AAYhBA,QAAAA,CAASU,SAAY,GAAA,CAACf,GAAagB,EAAAA,QAAAA,GAAW,KAAK,KAAA;AACjD,EAAA,OAAOX,QAASL,CAAAA,GAAAA,EAAKiB,KAAEC,CAAAA,MAAAA,EAAUC,EAAAA,MAAAA,CAAOH,QAAAA,CAAAA,CAAWI,CAAAA,IAAAA,EAAOC,CAAAA,WAAAA,EAAkB,KAAA,MAAA;AAC9E,CAAA;AAEO,SAASC,OAAOtB,GAAW,EAAA;AAChC,EAAOC,OAAAA,kBAAAA,CAAQC,QAAQC,GAAK,EAAA;AAACH,IAAAA;GAAI,CAAMI,KAAAA,KAAAA,CAAAA;AACzC;AAFgBkB,MAAAA,CAAAA,MAAAA,EAAAA,QAAAA,CAAAA","file":"env.cjs","sourcesContent":["/**\n * Copyright 2024 IBM Corp.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { z } from \"zod\";\nimport { FrameworkError } from \"@/errors.js\";\nimport { getProp } from \"@/internals/helpers/object.js\";\n\nexport function getEnv(key: string) {\n  return getProp(process.env, [key], undefined);\n}\n\nexport function parseEnv<T>(key: string, schema: z.ZodType<T>, defaultValue?: T): T {\n  const value = getEnv(key) ?? defaultValue;\n  const result = schema.safeParse(value);\n  if (!result.success) {\n    if (value === undefined) {\n      throw new FrameworkError(`Required variable '${key}' is not set!`);\n    }\n\n    throw new FrameworkError(`Failed to parse ENV variable (${key})!`, [result.error]);\n  }\n  return result.data;\n}\nparseEnv.asBoolean = (key: string, fallback = false) => {\n  return parseEnv(key, z.string(), String(fallback)).trim().toLowerCase() === \"true\";\n};\n\nexport function hasEnv(key: string) {\n  return getProp(process.env, [key]) !== undefined;\n}\n"]}